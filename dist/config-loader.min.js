var ConfigLoader=function(a,b,c,d,e){var f={process:function(b){if(b){a.isString(b)&&(b=JSON.parse(b));var c=b.package;c&&c.item&&(b.vmap=d.process(c.item.vmap),delete b.package,delete c.item)}return b}},g=function(b){this.options=b||{},a.defaults(b,{feed:!0,mediaGen:!1}),this.initialize.apply(this,arguments)},h="http://pjs-services-dev-cmtnxgpqy5.elasticbeanstalk.com/config/{{uri}}/?feed={{feed}}&mediaGen={{mediaGen}}",i=g.Events={READY:"ready",ERROR:"error"};return g.prototype={initialize:function(){a.bindAll(this,"onConfigLoaded","onMediaGenLoaded","onError")},load:function(){var c=a.template(this.options.configURL||h,this.options,{interpolate:/\{\{(.+?)\}\}/g});c=e.setParameters(c,this.options.configParams),this.request=b.getJSON(c,this.onConfigLoaded),this.request.onerror=this.onError},onConfigLoaded:function(a){this.config=a;var c=a.mediaGen.replace(/&amp;/gi,"&");c=e.setParameters(c,this.options.mediaGenParams),this.request=b.getJSON(c,this.onMediaGenLoaded),this.request.onerror=this.onError},onMediaGenLoaded:function(a){this.config.mediaGen=f.process(a),this.trigger(i.READY,{type:i.READY,data:this.config,target:this})},onError:function(a){this.trigger(i.ERROR,{type:i.ERROR,data:a,target:this})},destroy:function(){this.request&&this.request.abort()}},a.extend(g.prototype,c.Events),g}(_,$,Backbone,VMAPParser,Url);