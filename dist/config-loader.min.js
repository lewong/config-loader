var ConfigLoader=function(a,b,c){var d=function(a,b,c){var d=this.request=new XMLHttpRequest;d.open("GET",a,!0),d.onload=function(){d.status>=200&&d.status<400?b(JSON.parse(d.responseText)):c(d.status)},d.onerror=function(){c(d.status)},d.send()};d.prototype={abort:function(){this.request.abort()}};var e={convert:function(a,b){return b={},a.on=function(c,d){return(b[c]=b[c]||[]).push(d),a},a.once=function(b,c){function d(){c.apply(a.off(b,d),arguments)}return d.h=c,a.on(b,d)},a.off=function(c,d){for(var e=b[c],f=0;d&&e&&e[f];f++)e[f]!==d&&e[f].h!==d||e.splice(f--,1);return f||delete b[c],a},a.emit=function(c){for(var d=b[c],e=0;d&&d[e];)d[e++].apply(a,d.slice.call(arguments,1));return a},a}},f={process:function(c){a.isString(c)&&(c=JSON.parse(c));var d=c.package;return d&&d.item&&(c.vmap=b.process(d.item.vmap),delete c.package,delete d.item),c}},g={whitelist:["feed","mediaGen","uri","geo","ref","type","group","device","network","chromeless","autoPlay","adFreeInterval","ccEnabled","useSegmentedScrubber","useNativeControls"],process:function(b,c){return b&&(b.adFreeInterval=b.timeSinceLastAd,a.isUndefined(b.adFreeInterval)&&(b.adFreeInterval=b.freewheelMinTimeBtwAds),b=a.pick(b,this.whitelist.concat(c.whitelist||[]))),b}},h=function(b){this.options=b||{},a.defaults(b,{feed:!0,mediaGen:!1}),this.initialize.apply(this,arguments)},i="http://media.mtvnservices-q.mtvi.com/pmt/e1/access/index.html?returntype=config&configtype=vmap&uri={{uri}}",j=h.Events={READY:"ready",ERROR:"error"};return h.prototype={initialize:function(){a.bindAll(this,"onConfigLoaded","onMediaGenLoaded","onError"),e.convert(this)},load:function(){var b=a.template(this.options.configURL||i,this.options,{interpolate:/\{\{(.+?)\}\}/g});b=c.setParameters(b,this.options.configParams),this.request=new d(b,this.onConfigLoaded,this.onError)},onConfigLoaded:function(a){a.config&&(a=a.config),this.config=g.process(a,this.options);var b=c.setParameters(a.mediaGen,this.options.mediaGenParams);this.request=new d(b,this.onMediaGenLoaded,this.onError)},onMediaGenLoaded:function(a){var b;try{a=f.process(a)}catch(c){b=!0,this.onError(c)}b||(this.config.mediaGen=a,this.emit(j.READY,{type:j.READY,data:this.config,target:this}))},onError:function(a){this.emit(j.ERROR,{type:j.ERROR,data:a,target:this})},destroy:function(){this.request&&this.request.abort()}},h.version="0.4.0",h.build="Mon Mar 31 2014 15:00:23",h}(_,VMAPParser,Url);