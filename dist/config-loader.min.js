var ConfigLoader=function(a,b,c,d,e){var f=function(a,b,c){var d=this.request=new XMLHttpRequest;d.open("GET",a,!0),d.onload=function(){d.status>=200&&d.status<400?b(JSON.parse(d.responseText)):c(d.status)},d.onerror=function(){c(d.status)},d.send()};f.prototype={abort:function(){this.request.abort()}};var g={convert:function(a,b){return b={},a.on=function(c,d){return(b[c]=b[c]||[]).push(d),a},a.once=function(b,c){function d(){c.apply(a.off(b,d),arguments)}return d.h=c,a.on(b,d)},a.off=function(c,d){for(var e=b[c],f=0;d&&e&&e[f];f++)e[f]!==d&&e[f].h!==d||e.splice(f--,1);return f||delete b[c],a},a.emit=function(c){for(var d=b[c],e=0;d&&d[e];)d[e++].apply(a,d.slice.call(arguments,1));return a},a}},h={process:function(b){if(b){a.isString(b)&&(b=JSON.parse(b));var c=b.package;c&&c.item&&(b.vmap=d.process(c.item.vmap),delete b.package,delete c.item)}return b}},i={whitelist:["feed","mediaGen","uri","geo","ref","type","group","device","network","chromeless","autoPlay","adFreeInterval","ccEnabled","useSegmentedScrubber","useNativeControls"],process:function(b,c){return b&&(b.adFreeInterval=b.timeSinceLastAd,a.isUndefined(b.adFreeInterval)&&(b.adFreeInterval=b.freewheelMinTimeBtwAds),b=a.pick(b,this.whitelist.concat(c.whitelist||[]))),b}},j=function(b){this.options=b||{},a.defaults(b,{feed:!0,mediaGen:!1}),this.initialize.apply(this,arguments)},k="http://media.mtvnservices-q.mtvi.com/pmt/e1/access/index.html?returntype=config&configtype=vmap&uri={{uri}}",l=j.Events={READY:"ready",ERROR:"error"};return j.prototype={initialize:function(){a.bindAll(this,"onConfigLoaded","onMediaGenLoaded","onError")},load:function(){var b=a.template(this.options.configURL||k,this.options,{interpolate:/\{\{(.+?)\}\}/g});b=e.setParameters(b,this.options.configParams),this.request=new f(b,this.onConfigLoaded,this.onError)},onConfigLoaded:function(a){a.config&&(a=a.config),this.config=i.process(a,this.options);var b=a.mediaGen.replace(/&amp;/gi,"&");b=e.setParameters(b,this.options.mediaGenParams),this.request=new f(b,this.onMediaGenLoaded,this.onError)},onMediaGenLoaded:function(a){this.config.mediaGen=h.process(a),this.emit(l.READY,{type:l.READY,data:this.config,target:this})},onError:function(a){this.emit(l.ERROR,{type:l.ERROR,data:a,target:this})},destroy:function(){this.request&&this.request.abort()}},j.version="0.4.0",j.build="Wed Mar 05 2014 15:43:36",g.convert(j.prototype),j}(_,$,Backbone,VMAPParser,Url);