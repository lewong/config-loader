var ConfigLoader=function(a,b,c,d,e){var f={process:function(b){if(b){a.isString(b)&&(b=JSON.parse(b));var c=b.package;c&&c.item&&(b.vmap=d.process(c.item.vmap),delete b.package,delete c.item)}return b}},g={whitelist:["feed","mediaGen","uri","geo","ref","type","group","device","network","chromeless","autoPlay","adFreeInterval","ccEnabled","useSegmentedScrubber","useNativeControls"],process:function(b,c){return b&&(b.adFreeInterval=b.timeSinceLastAd,a.isUndefined(b.adFreeInterval)&&(b.adFreeInterval=b.freewheelMinTimeBtwAds),b=a.pick(b,this.whitelist.concat(c.whitelist||[]))),b}},h=function(b){this.options=b||{},a.defaults(b,{feed:!0,mediaGen:!1}),this.initialize.apply(this,arguments)},i="http://media.mtvnservices-q.mtvi.com/pmt/e1/access/index.html?returntype=config&configtype=vmap&uri={{uri}}",j=h.Events={READY:"ready",ERROR:"error"};return h.prototype={initialize:function(){a.bindAll(this,"onConfigLoaded","onMediaGenLoaded","onError")},load:function(){var c=a.template(this.options.configURL||i,this.options,{interpolate:/\{\{(.+?)\}\}/g});c=e.setParameters(c,this.options.configParams),this.request=b.ajax({url:c,dataType:"json",success:this.onConfigLoaded,error:this.onError})},onConfigLoaded:function(a){a.config&&(a=a.config),this.config=g.process(a,this.options);var c=a.mediaGen.replace(/&amp;/gi,"&");c=e.setParameters(c,this.options.mediaGenParams),this.request=b.ajax({url:c,dataType:"json",success:this.onMediaGenLoaded,error:this.onError})},onMediaGenLoaded:function(a){this.config.mediaGen=f.process(a),this.trigger(j.READY,{type:j.READY,data:this.config,target:this})},onError:function(a){this.trigger(j.ERROR,{type:j.ERROR,data:a,target:this})},destroy:function(){this.request&&this.request.abort()}},h.version="0.4.0",h.build="Fri Feb 28 2014 09:13:38",a.extend(h.prototype,c.Events),h}(_,$,Backbone,VMAPParser,Url);